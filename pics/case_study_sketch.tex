\newcommand{\valve}[1]{\coordinate(A) at #1;% 
\draw[thick] (A) -- ++(0,-1);%
\draw[thick,fill=white] ($(A) + (0,-0.1)$) --++(-0.2,0) --++(0.4,-0.8) --++(-0.4,0) --++(+0.4,0.8) -- cycle;
}
\begin{tikzpicture}
[
    scale=0.8
    ,>=latex
]

    %\draw[help lines] (0,0) grid (7,7);

% tank filling
\begin{scope}
    \clip (0,2) .. controls (0,1) and (2,1) .. (2,2) -- (2,4) .. controls (2,5) and (0,5) .. (0,4) -- cycle;
    
    \fill[pattern=crosshatch dots, pattern color=blue] (0,0) rectangle (4,3);
\end{scope}

% tank body
\draw[thick, name path=tank] (0,2) .. controls (0,1) and (2,1) .. (2,2) -- (2,4) .. controls (2,5) and (0,5) .. (0,4) -- cycle;

% tank labels
\draw[dashed] (0,2) -- node[left,pos=0, font=\footnotesize]{$\min$}(2,2);
\draw[dashed] (0,4) -- node[left,pos=0, font=\footnotesize]{$\max$}(2,4);
\draw[thick] (0,3.7) -- node[right, pos=1, font=\footnotesize]{$\mathit{goal}$} (2,3.7);
\draw[thick, dashed] (0,3.4) -- node[right, pos=1,xshift=0.3cm, font=\footnotesize]{$\mathit{activate}$}(2,3.4);

% controller
\draw[thick] (3,1) rectangle (4.5,2);
\node[font=\footnotesize] at(3.75,1.5) {$\mathit{control}$};

% sensor & wiring
\draw[] (2,3.4) .. controls (3,3.4) and (2,1.75) .. (3,1.75);
\draw[] (0.5,0.5) .. controls (1,0.5) and (2,1.5) .. (3,1.5);
\draw[] (1.5,0.5) .. controls (0.5,0.5) and (2,1.25) .. (3,1.25);

% inflow
\path[name path=outPipeA] (0.5,3) -- (0.5,0);
\path [name intersections={of=tank and outPipeA,by=outNozzleA}];
\path[name path=outPipeB] (1.5,3) -- (1.5,0);
\path [name intersections={of=tank and outPipeB,by=outNozzleB}];
\valve{(0.5,1)}
\valve{(1.5,1)}
\draw[thick] (0.5,1) -- (outNozzleA);
\draw[thick] (1.5,1) -- (outNozzleB);


% outflow
\path[name path=inPipe] (1,6) -- (1,3);
\path [name intersections={of=tank and inPipe,by=inNozzle}];
\draw[thick] (inNozzle) -- (1,5.4);
%\valve{(1,6)}

% labels
\draw[thick,->] (1.5,5.4) --node[right, font=\footnotesize]{\SI{4}{\litre\per\hour}} (1.5,4.8);
\draw[thick,->] (0,.8) --node[left, font=\footnotesize]{\SI{6}{\litre\per\hour}} (0,.2);
\draw[thick,->] (2,.8) --node[right, font=\footnotesize]{\SI{4}{\litre\per\hour}} (2,.2);

\end{tikzpicture}
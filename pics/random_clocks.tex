\begin{tikzpicture}
[
scale=.57
, >=latex
, every node/.style={font=\tiny}
]

\draw[help lines] (0,0) grid ($(7,1.5) + (-\pgflinewidth,-\pgflinewidth)$);
\draw[thick,->] (0,0) -- node[below,pos=1]{$s_{i,j}$}(7,0);
\draw[thick,->] (0,0) -- node[left,pos=1]{$f_{i}$} (0,1.5);

% CDF
\draw[name path=function] (0,0) .. controls (0.5,0) and (2.75,1) .. (3.5,1) .. controls (4.25,1) and (6.5,0) .. (7,0);

% CDF intersections
\path[name path=tmax] (4.5,-1) -- (4.5,1.5);
\path[name path=act] (1,-1) -- (1,1.5);
\path[name path=dis] (3,-1) -- (3,1.5);
\path[name path=react] (4,-1) -- (4,1.5);
\path [name intersections={of=function and tmax,by=tmaxf}];
\path [name intersections={of=function and act,by=actf}];
\path [name intersections={of=function and dis,by=disf}];
\path [name intersections={of=function and react,by=reactf}];

% step function: Act_i
\begin{scope}[yshift=-3.5cm]
\draw[thick] (0,0) -- (1,0) -- (1,0.5) -- (3,0.5) -- (3,0) -- (4,0) -- (4,0.5) -- (6,0.5) -- (6,0) -- (7,0);
\draw[thick,->] (0,0) -- node[below,pos=1]{$\mathit{Act}_i$}(7,0);
\draw[thick] (0,0) -- node[pos=0,left]{$0$} node[pos=1,left]{$1$} (0,0.5);
\end{scope}

% global time
\begin{scope}[yshift=-1cm]
\draw[thick,->] (0,0) -- node[below,pos=1]{$t$}(7,0);
\draw[thick] (1,-.1) -- (1,.1);
\draw[thick] (3,-.1) -- (3,.1);
\draw[thick] (4,-.1) -- (4,.1);
\draw[thick] (6,-.1) -- (6,.1);
\end{scope}

% mark valuations
\begin{scope}
\clip (0,-.5) rectangle (2,1.5);
\fill[fill=black, fill opacity=0.3] (0,0) .. controls (0.5,0) and (2.75,1) .. (3.5,1) .. controls (4.25,1) and (6.5,0) .. (7,0) -- cycle;
%\fill[fill=black, fill opacity=0.15] (0,0) rectangle (3,-.5);
\end{scope}
\draw[dashed, thick](1,-1) -- (0,0);
\draw[dashed, thick](3,-1) -- (2,0);
\begin{scope}
\clip (2,0) rectangle (4,1.5);
\fill[fill=black, fill opacity=0.3] (0,0) .. controls (0.5,0) and (2.75,1) .. (3.5,1) .. controls (4.25,1) and (6.5,0) .. (7,0) -- (7,-3) -- (0,-3) -- cycle;
\end{scope}
%\fill[fill=black, fill opacity=0.15] (4,-0.5) .. controls (4,-.25) and (3,-.25) .. (3,0) -- (5,0) .. controls (5,-.25) and (6,-.25) .. (6,-0.5) -- cycle;
\draw[dashed, thick](4,-1) -- (2,0);
\draw[dashed, thick](6,-1) -- (4,0);

% labels
\node[] at (1,-2.45){$\scriptscriptstyle V(r_i) = 0$};
\node[] at (2.75,-2.75){$\scriptscriptstyle V(r_i) = \Delta_t$};
\node[] at (4.25,-2.45){$\scriptscriptstyle V(r_i) = \Delta_t$};
\node[] at (2,-3.25){active};
\node[] at (5,-3.25){active};
\node[] at (6,-2.75){$\scriptscriptstyle V(r_i) = s_{i,j}$};
\node[] at (2.5,.25){integration area};
\begin{scope}[yshift=.5cm]
  \draw [decorate,decoration={brace,amplitude=3pt},xshift=0pt,yshift=-2pt]
  (3,-1.5) -- (1,-1.5) node [anchor=north,midway]
  {\tiny $\Delta_t$};
\end{scope}


%intersection
%\path[name path=tmax] (4.5,-1) -- (4.5,1.5);
%\path [name intersections={of=function and tmax,by=E}];

%\draw[thick] (1,-.25) -- node[fill=white,below, pos=0]{$\val(c_i) = 0$} (1,-0.75);
%\draw[thick] (4.5,-1.25) -- node[fill=white,below, pos=0]{$\val(c_i) = s_i$} (E);
%\node[fill=white] at(1,-0.5) {activation};
%\node[fill=white] at(4.5,-0.5) {expiration};

\end{tikzpicture}
